@* Partial View: _NavbarIncomeExpenses.cshtml *@
@{
    var activePage = ViewData["ActivePage"]?.ToString() ?? "Income";
    var isIncomeActive = activePage.Equals("Income", StringComparison.OrdinalIgnoreCase);
    var isExpenseActive = activePage.Equals("Expense", StringComparison.OrdinalIgnoreCase);
    var totalIncomeFormatted = ViewData["TotalIncomeFormatted"]?.ToString() ?? "1000 đ";
    var totalExpenseFormatted = ViewData["TotalExpenseFormatted"]?.ToString() ?? "1000 đ";
    var remainingBalanceFormatted = ViewData["RemainingBalanceFormatted"]?.ToString() ?? "1000 đ";
}


<nav class="navbar navbar-expand-lg blur border-radius-lg top-0 z-index-3 shadow-sm mb-3 py-2">
    <div class="container-fluid px-2">
        <div class="d-flex flex-wrap justify-content-between align-items-center w-100">

            @* === KHỐI BÊN TRÁI === *@
            @* Luôn ở vị trí đầu tiên (order-1). Trên mobile là cột, trên desktop là hàng ngang chỉ có nút *@
            <div class="d-flex flex-column order-1">
                @* ** Tiêu đề chỉ hiển thị trên Mobile (< lg) ** *@
                <h6 class="mb-1 d-block d-lg-none fw-bolder text-dark" style="font-size: 0.9rem;">
                    QUẢN LÝ THU CHI
                </h6>

                @* ** Nút bấm Thu/Chi ** *@
                <ul class="navbar-nav d-flex flex-row">
                    <li class="nav-item me-2">
                        <a class="btn px-3 py-1 @(isExpenseActive ? "btn-danger text-white shadow-sm" : "btn-outline-danger") d-flex align-items-center justify-content-center" style="min-width: 120px; height: 32px;"
                           asp-controller="IncomeExpenses" asp-action="Expenses">
                            <i class="fas fa-arrow-up me-1"></i>
                            <span>Khoản chi kkk</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="btn px-3 py-1 @(isIncomeActive ? "btn-success text-white shadow-sm" : "btn-outline-success") d-flex align-items-center justify-content-center" style="min-width: 120px; height: 32px;"
                           asp-controller="IncomeExpenses" asp-action="Income">
                            <i class="fas fa-arrow-down me-1"></i>
                            <span>Khoản thu</span>
                        </a>
                    </li>
                </ul>
            </div>

            @* === KHỐI GIỮA (TIÊU ĐỀ DESKTOP) === *@
            <div class="mx-auto text-center order-lg-2 d-none d-lg-block">
                <a class="navbar-brand font-weight-bolder text-dark m-0 p-0" style="font-size: 1.1rem;" asp-controller="IncomeExpenses" asp-action="Index">
                    @* Tăng nhẹ size chữ *@
                    QUẢN LÝ THU CHI
                </a>
            </div>

            @* === KHỐI BÊN PHẢI (TỔNG TIỀN) === *@
            <div class="order-2 order-lg-3 mt-2 mt-lg-0">
                <ul class="navbar-nav d-flex flex-column align-items-end flex-lg-row align-items-lg-center">
                    <li class="nav-item mb-1 mb-lg-0 me-lg-3">
                        <span class="nav-link d-flex align-items-baseline p-0">
                            <i class="fas fa-wallet text-success me-1" style="font-size: 0.8em;"></i>
                            <span class="text-success small me-1 d-none d-lg-inline">Thu:</span>
                            <span class="text-success fw-bold" id="total-income">@totalIncomeFormatted</span>
                        </span>
                    </li>
                    <li class="nav-item mb-1 mb-lg-0 me-lg-3">
                        <span class="nav-link d-flex align-items-baseline p-0">
                            <i class="fas fa-shopping-cart text-danger me-1" style="font-size: 0.8em;"></i>
                            <span class="text-danger small me-1 d-none d-lg-inline">Chi:</span>
                            <span class="text-danger fw-bold" id="total-expense">@totalExpenseFormatted</span>
                        </span>
                    </li>
                    <li class="nav-item">
                        <span class="nav-link d-flex align-items-center p-0">
                            <i class="fas fa-piggy-bank text-warning me-1" style="font-size: 0.8em;"></i>
                            <span class="text-warning small me-1 d-none d-lg-inline">Còn:</span>
                            <span class="text-warning fw-bold" id="remaining-balance">@remainingBalanceFormatted</span>
                        </span>
                    </li>
                </ul>
            </div>

        </div>
    </div>
</nav>
<style>
    /* Style chung cho nút */
    .navbar .btn { /* Áp dụng cho tất cả .btn trong navbar */
        /* Có thể thêm border-radius nếu muốn hơi bo tròn thay vì vuông hẳn */
        border-radius: 0.375rem; /* Bootstrap default rounded */
        line-height: 1.4;
        font-size: 0.875rem; /* Size chữ mặc định của button thường */
        /* transition để hiệu ứng mượt hơn */
        transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    }

    /* Style cho nút không active trên Desktop (outline) */
    .navbar .btn-outline-success {
        border-color: var(--bs-success);
        color: var(--bs-success);
    }

        .navbar .btn-outline-success:hover {
            background-color: var(--bs-success);
            color: white;
        }

    .navbar .btn-outline-danger {
        border-color: var(--bs-danger);
        color: var(--bs-danger);
    }

        .navbar .btn-outline-danger:hover {
            background-color: var(--bs-danger);
            color: white;
        }

    /* Style cho nút inactive trên Mobile (light) */
    @@media (max-width: 991.98px) {
        .navbar a.btn:not(.btn-success):not(.btn-danger) { /* Áp dụng cho nút không active */
            background-color: #f8f9fa; /* Màu nền xám rất nhạt */
            border-color: #dee2e6 !important; /* Viền xám nhạt */
            color: #495057; /* Màu chữ */
        }

            .navbar a.btn:not(.btn-success):not(.btn-danger):hover {
                background-color: #e9ecef; /* Sáng hơn khi hover */
            }
    }


    /* Căn chỉnh icon tốt hơn */
    .navbar .nav-link i[class*="fa-"],
    .navbar .nav-link i[class*="material-symbols"],
    .navbar .btn i[class*="fa-"] {
        vertical-align: -2px;
    }

    /* Size chữ số tiền (không còn class small) */
    .navbar .nav-link span[id^='total-'],
    .navbar .nav-link span[id='remaining-balance'] {
        font-size: 0.9rem; /* Size chữ mặc định hoặc lớn hơn chút */
    }
    /* Label Thu/Chi/Còn trên desktop */
    .navbar .nav-link .small {
        font-size: 0.75rem; /* Size chữ cho label */
    }


    /* Responsive adjustments */
    @@media (max-width: 991.98px) {
        /* Bỏ max-width */
        .order-1 h6 {
            font-size: 0.8rem;
        }

        .order-2, .order-1 {
            max-width: none;
        }
        /* Đảm bảo không còn max-width */
        .order-1 {
            margin-right: auto;
        }
        /* Đẩy khối phải ra xa */
        .navbar .nav-link span[id^='total-'],
        .navbar .nav-link span[id='remaining-balance'] {
            font-size: 0.85rem; /* Size chữ số tiền trên mobile */
        }
    }

    @@media (max-width: 380px) {
        .order-1 h6 {
            font-size: 0.7rem;
        }

        .navbar .nav-link span[id^='total-'],
        .navbar .nav-link span[id='remaining-balance'] {
            font-size: 0.75rem; /* Nhỏ hơn nữa */
        }

        .navbar .btn {
            font-size: 0.8rem;
            min-width: 100px !important; /* Giảm min-width trên màn hình nhỏ */
        }
    }

</style>